<h1>Clientes</h1>

<script>
	$(function() {
		grid = $('#grid').dataTable({
		  "bJQueryUI": true,
			"sPaginationType": "full_numbers"
		});

		$('#link-message').click(function() {
      $('#message-green').hide("slow");
		});

		$('a.delete').click(function() {
		  index = $(this).parent().parent()[0].rowIndex - 1;
      if ( confirm("Deseja excluir este cliente?") )
          $.ajax({
              url: this.href.replace('/destroy', ''),
              type: 'post',
              dataType: 'script',
              data: { '_method': 'delete' },
              success: function() {
                grid.fnDeleteRow(index);
              }
          });

      return false;
    });
	});
</script>

<% if flash[:notice] %>
<div id="message-green">
  <table border="0" width="100%" cellpadding="0" cellspacing="0">
  <tr>
	  <td class="green-left"><%= notice %></td>
	  <td class="green-right"><a id="link-message"><img src="/images/icon_close_green.gif" alt="" /></a></td>
  </tr>
  </table>
</div>
<% end %>

<%= link_to "", new_cliente_path, :id => "add", :class => "add-link" %>

<table border="0" cellpadding="0" cellspacing="0" id="grid" class="display">
  <thead>
    <tr>
      <th>CÃ³digo</th>
      <th>Nome</th>
      <th>Sexo</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  <% @clientes.each do |cliente| %>
  <tr>
    <td><%= cliente.codigo %></td>
    <td><%= cliente.nome %></td>
    <td><%= cliente.sexo %></td>
    <td><%= link_to "Editar", edit_cliente_path(cliente) %></td>
    <td><%= link_to "Excluir", cliente, :class => "delete" %></td>
  </tr>
  <% end %>
  </tbody>
</table>

